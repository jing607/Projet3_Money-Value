{"ast":null,"code":"import { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, resolveComponent as _resolveComponent, createBlock as _createBlock, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"wide\"\n};\nconst _hoisted_2 = {\n  class: \"cur-list position-relative\"\n};\nconst _hoisted_3 = {\n  class: \"card\"\n};\nconst _hoisted_4 = {\n  class: \"card-header\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = {\n  class: \"table table-bordered\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Cur.1\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Cur.2\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Rate\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Hits\"), /*#__PURE__*/_createElementVNode(\"th\", {\n  colspan: \"2\"\n}, [/*#__PURE__*/_createElementVNode(\"em\", null, \"Action\")])])], -1 /* HOISTED */);\nconst _hoisted_8 = {\n  class: \"text-info\"\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = {\n  key: 0,\n  id: \"currencyPairsModal\",\n  class: \"modal fade show\",\n  tabindex: \"-1\",\n  \"aria-labelledby\": \"exampleModalLabel\",\n  \"aria-hidden\": \"true\"\n};\nconst _hoisted_12 = {\n  class: \"modal-content\"\n};\nconst _hoisted_13 = {\n  class: \"modal-header\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"modal-title fs-5\",\n  id: \"exampleModalLabel\"\n};\nconst _hoisted_15 = {\n  key: 1,\n  class: \"modal-title fs-5\",\n  id: \"exampleModalLabel\"\n};\nconst _hoisted_16 = {\n  class: \"modal-body\"\n};\nconst _hoisted_17 = {\n  key: 1\n};\nconst _hoisted_18 = {\n  class: \"form-group\"\n};\nconst _hoisted_19 = /*#__PURE__*/_createElementVNode(\"label\", null, [/*#__PURE__*/_createTextVNode(\"Source currency \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-danger\"\n}, \"*\")], -1 /* HOISTED */);\nconst _hoisted_20 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  selected: true\n}, \"--Choose--\", -1 /* HOISTED */);\nconst _hoisted_21 = [\"value\"];\nconst _hoisted_22 = {\n  class: \"form-group mt-3\"\n};\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"label\", null, [/*#__PURE__*/_createTextVNode(\"Target currency \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-danger\"\n}, \"*\")], -1 /* HOISTED */);\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"\",\n  selected: true\n}, \"--Choose--\", -1 /* HOISTED */);\nconst _hoisted_25 = [\"value\"];\nconst _hoisted_26 = {\n  class: \"form-group mt-3\"\n};\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"label\", null, [/*#__PURE__*/_createTextVNode(\"Rate \"), /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"text-danger\"\n}, \"*\")], -1 /* HOISTED */);\nconst _hoisted_28 = {\n  class: \"text-center\"\n};\nconst _hoisted_29 = [\"disabled\"];\nconst _hoisted_30 = {\n  key: 2\n};\nconst _hoisted_31 = {\n  class: \"d-flex flex-row justify-content-evenly align-items-center\"\n};\nconst _hoisted_32 = {\n  class: \"big-font\"\n};\nconst _hoisted_33 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"big-font\"\n}, \" = \", -1 /* HOISTED */);\nconst _hoisted_34 = {\n  class: \"big-font\"\n};\nconst _hoisted_35 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary mt-4 mb-2 me-3\"\n}, \"Save changes\")], -1 /* HOISTED */);\nconst _hoisted_36 = {\n  class: \"modal-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ErrorAlert = _resolveComponent(\"ErrorAlert\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [$data.showCurPairSuccess ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"success\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.hideCurPairSuccess())\n  }, _toDisplayString($data.addNotif), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h4\", null, [_createTextVNode(\" Pair List \"), _createElementVNode(\"button\", {\n    class: \"btn btn-primary float-end\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.curPairsModalAddShow())\n  }, \" Add a pair \")])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"table\", _hoisted_6, [_hoisted_7, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.curPairs, cur => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: cur.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(cur.source_currency.code), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(cur.target_currency.code), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(cur.rate), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_8, _toDisplayString(cur.hits), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-warning float-end\",\n      onClick: $event => $options.curPairsModalEditShow(cur)\n    }, \"edit\", 8 /* PROPS */, _hoisted_9)]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $event => $options.deletePairs(cur.id),\n      class: \"btn btn-danger float-end\"\n    }, \"delete\", 8 /* PROPS */, _hoisted_10)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])]), _createCommentVNode(\" Add new currency Pair modal  \"), $data.showPairsModal ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"calque\",\n    onClick: _cache[15] || (_cache[15] = $event => $options.hidePairsModal())\n  }, [$data.showPairsModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"div\", {\n    class: \"modal-dialog modal-dialog-centered\",\n    onClick: _cache[14] || (_cache[14] = _withModifiers(() => {}, [\"stop\"]))\n  }, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [$data.addMode ? (_openBlock(), _createElementBlock(\"h1\", _hoisted_14, \"Add a pair\")) : (_openBlock(), _createElementBlock(\"h1\", _hoisted_15, \"Edit a pair\")), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn-close\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.hidePairsModal()),\n    \"aria-label\": \"Close\"\n  })]), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"form\", {\n    onSubmit: _cache[11] || (_cache[11] = _withModifiers($event => $options.handleSubmitCurPair($data.addMode), [\"prevent\"])),\n    class: \"text-start\"\n  }, [$data.error.length ? (_openBlock(), _createBlock(_component_ErrorAlert, {\n    key: 0,\n    error: $data.error\n  }, null, 8 /* PROPS */, [\"error\"])) : _createCommentVNode(\"v-if\", true), $data.addMode ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [_createElementVNode(\"div\", _hoisted_18, [_hoisted_19, _withDirectives(_createElementVNode(\"select\", {\n    name: \"source_currency\",\n    id: \"source-currency\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.source_currency = $event),\n    class: \"btn shadow border dropdown-toggle d-block text-start\",\n    onChange: _cache[4] || (_cache[4] = (...args) => $options.checkAddPairsForm && $options.checkAddPairsForm(...args))\n  }, [_hoisted_20, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.curList, cur => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: cur.id,\n      value: cur.id\n    }, _toDisplayString(cur.code) + \"-\" + _toDisplayString(cur.full_name), 9 /* TEXT, PROPS */, _hoisted_21);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelSelect, $data.source_currency]])]), _createElementVNode(\"div\", _hoisted_22, [_hoisted_23, _withDirectives(_createElementVNode(\"select\", {\n    name: \"target_currency\",\n    id: \"target-currency\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.target_currency = $event),\n    class: \"btn shadow border dropdown-toggle d-block text-start\",\n    onChange: _cache[6] || (_cache[6] = (...args) => $options.checkAddPairsForm && $options.checkAddPairsForm(...args))\n  }, [_hoisted_24, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.curList, cur => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: cur.id,\n      value: cur.id\n    }, _toDisplayString(cur.code) + \"-\" + _toDisplayString(cur.full_name), 9 /* TEXT, PROPS */, _hoisted_25);\n  }), 128 /* KEYED_FRAGMENT */))], 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelSelect, $data.target_currency]])]), _createElementVNode(\"div\", _hoisted_26, [_hoisted_27, _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    class: \"form-control shadow border\",\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.rate = $event),\n    onKeyup: _cache[8] || (_cache[8] = (...args) => $options.checkAddPairsForm && $options.checkAddPairsForm(...args)),\n    onBlur: _cache[9] || (_cache[9] = (...args) => $options.checkAddPairsForm && $options.checkAddPairsForm(...args)),\n    step: \"any\",\n    required: \"\"\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.rate]])]), _createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary mt-4 mb-2 me-3\",\n    disabled: $data.disabledBtn\n  }, \"Save changes\", 8 /* PROPS */, _hoisted_29)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [_createElementVNode(\"div\", _hoisted_31, [_createElementVNode(\"span\", _hoisted_32, \"1 \" + _toDisplayString($data.source_c), 1 /* TEXT */), _hoisted_33, _withDirectives(_createElementVNode(\"input\", {\n    type: \"number\",\n    class: \"form-control shadow border rate-def\",\n    \"onUpdate:modelValue\": _cache[10] || (_cache[10] = $event => $data.rateToEdit = $event),\n    step: \"any\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.rateToEdit]]), _createElementVNode(\"span\", _hoisted_34, _toDisplayString($data.target_c), 1 /* TEXT */)]), _hoisted_35]))], 32 /* HYDRATE_EVENTS */)]), _createElementVNode(\"div\", _hoisted_36, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary\",\n    onClick: _cache[12] || (_cache[12] = $event => $options.hidePairsModal($data.addMode))\n  }, \"Close\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-warning\",\n    onClick: _cache[13] || (_cache[13] = $event => $options.resetCurPairsForm())\n  }, \"Reset\")])])])])) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","colspan","id","tabindex","value","selected","type","_createElementBlock","_hoisted_1","_hoisted_2","$data","showCurPairSuccess","onClick","_cache","$event","$options","hideCurPairSuccess","addNotif","_hoisted_3","_hoisted_4","curPairsModalAddShow","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","_ctx","curPairs","cur","key","_toDisplayString","source_currency","code","target_currency","rate","_hoisted_8","hits","curPairsModalEditShow","_hoisted_9","deletePairs","_hoisted_10","_createCommentVNode","showPairsModal","hidePairsModal","_hoisted_11","_withModifiers","_hoisted_12","_hoisted_13","addMode","_hoisted_14","_hoisted_15","_hoisted_16","onSubmit","handleSubmitCurPair","error","length","_createBlock","_component_ErrorAlert","_hoisted_17","_hoisted_18","_hoisted_19","name","onChange","args","checkAddPairsForm","_hoisted_20","curList","full_name","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","onKeyup","onBlur","step","required","_hoisted_28","disabled","disabledBtn","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","source_c","_hoisted_33","rateToEdit","_hoisted_34","target_c","_hoisted_35","_hoisted_36","resetCurPairsForm"],"sources":["/Users/hj/Desktop/cours/6_Projet3_Money-Value/Projet3_Money-Value/Admin-Vue/front/src/components/PairComponent.vue"],"sourcesContent":["<template>\r\n  <div class=\"wide\">\r\n    <div class=\"cur-list  position-relative\">\r\n        <div class=\"success\" v-if=\"showCurPairSuccess\" @click=\"hideCurPairSuccess()\">{{ addNotif }}</div>\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h4>\r\n                    Pair List\r\n                    <button class=\"btn btn-primary float-end\"  @click=\"curPairsModalAddShow()\">\r\n                        Add a pair\r\n                    </button>\r\n                </h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n                <table class=\"table table-bordered\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Cur.1</th>\r\n                            <th>Cur.2</th>\r\n                            <th>Rate</th>\r\n                            <th>Hits</th>\r\n                            <th colspan=\"2\"><em>Action</em></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"cur in curPairs\" :key=\"cur.id\">\r\n                            <td>{{cur.source_currency.code}}</td>\r\n                            <td>{{cur.target_currency.code}}</td>\r\n                            <td>{{cur.rate}}</td>\r\n                            <td class=\"text-info\">{{cur.hits}}</td>\r\n                            <td><button class=\"btn btn-warning float-end\" @click=\"curPairsModalEditShow(cur)\">edit</button></td>\r\n                            <td><button type=\"button\" @click=\"deletePairs(cur.id)\" class=\"btn btn-danger float-end\">delete</button></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n      </div> \r\n    <!-- Add new currency Pair modal  -->\r\n    <div class=\"calque\" v-if=\"showPairsModal\" @click=\"hidePairsModal()\">\r\n        <div id=\"currencyPairsModal\" v-if=\"showPairsModal\"  class=\"modal fade show\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-dialog-centered\" @click.stop>\r\n                <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h1 v-if=\"addMode\" class=\"modal-title fs-5\" id=\"exampleModalLabel\">Add a pair</h1>\r\n                    <h1 v-else class=\"modal-title fs-5\" id=\"exampleModalLabel\">Edit a pair</h1>\r\n                    <button type=\"button\" class=\"btn-close\" @click=\"hidePairsModal()\" aria-label=\"Close\"></button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form @submit.prevent=\"handleSubmitCurPair(addMode)\" class=\"text-start\">\r\n                        <ErrorAlert v-if=\"error.length\" :error=\"error\" />\r\n\r\n                        <div v-if=\"addMode\">\r\n                            <div class=\"form-group\">\r\n                                <label>Source currency <span class=\"text-danger\">*</span></label>\r\n                                <select name=\"source_currency\" id=\"source-currency\" v-model=\"source_currency\" class=\"btn shadow border dropdown-toggle d-block text-start\" @change=\"checkAddPairsForm\">\r\n                                    <option value=\"\" :selected=\"true\">--Choose--</option>\r\n                                    <option v-for=\"cur in curList\" :key=\"cur.id\" :value=\"cur.id\">{{ cur.code }}-{{ cur.full_name }}</option>\r\n                                </select>\r\n                            </div>\r\n                            \r\n                            <div class=\"form-group mt-3\">\r\n                                <label>Target currency <span class=\"text-danger\">*</span></label>\r\n                                <select name=\"target_currency\" id=\"target-currency\" v-model=\"target_currency\" class=\"btn shadow border dropdown-toggle d-block text-start\" @change=\"checkAddPairsForm\">\r\n                                    <option value=\"\" :selected=\"true\">--Choose--</option>\r\n                                    <option v-for=\"cur in curList\" :key=\"cur.id\" :value=\"cur.id\">{{ cur.code }}-{{ cur.full_name }}</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div class=\"form-group mt-3\">\r\n                                <label>Rate <span class=\"text-danger\">*</span></label>\r\n                                <input type=\"number\" class=\"form-control shadow border\" v-model=\"rate\" @keyup=\"checkAddPairsForm\" @blur=\"checkAddPairsForm\" step=\"any\" required>\r\n                            </div>\r\n                            <div class=\"text-center\">\r\n                                <button type=\"submit\" class=\"btn btn-primary mt-4 mb-2 me-3\" :disabled=\"disabledBtn\">Save changes</button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div v-else>\r\n                            <div class=\"d-flex flex-row justify-content-evenly align-items-center\">\r\n                                <span class=\"big-font\">1 {{ source_c }}</span>\r\n                                <span class=\"big-font\"> = </span>\r\n                                <input type=\"number\" class=\"form-control shadow border rate-def\" v-model=\"rateToEdit\" step=\"any\" required>\r\n                                <span class=\"big-font\">{{ target_c }}</span>\r\n                            </div>\r\n                            <div class=\"text-center\">\r\n                                <button type=\"submit\" class=\"btn btn-primary mt-4 mb-2 me-3\">Save changes</button>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" @click=\"hidePairsModal(addMode)\">Close</button>\r\n                    <button type=\"button\" class=\"btn btn-warning\" @click=\"resetCurPairsForm()\">Reset</button>\r\n                </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n  import axios from 'axios';\r\n  import { mapState } from 'vuex';\r\n  import ErrorAlert from './login/ErrorAlert.vue';\r\n\r\n  export default {\r\n    name: 'PairComponent',\r\n\r\n    components: {\r\n        ErrorAlert,\r\n    },\r\n    data() {\r\n      return {\r\n        showPairsModal: false,\r\n        error: [],\r\n        addNotif: '',\r\n        showCurPairSuccess: false,\r\n        addMode: false,\r\n        idToEdit: null,\r\n        source_currency: '',\r\n        target_currency: '',\r\n        rate: null,\r\n        oldRate:null,\r\n        needsCorrection:false,\r\n        disabledBtn: true,\r\n        source_c: null,\r\n        target_c: null,\r\n        rateToEdit: null,\r\n      }\r\n\r\n    },\r\n    created() {\r\n      if(!this.user) {\r\n          this.$router.push('/login')\r\n      }\r\n\r\n      if(!this.curList) {\r\n          this.$store.dispatch('getCurList')\r\n      }\r\n      if(!this.curPairs) {\r\n          this.$store.dispatch('getCurPairs')\r\n      }\r\n    },\r\n\r\n    computed: {\r\n        ...mapState(['user', 'curList', 'curPairs']),\r\n        \r\n    },\r\n    methods: {\r\n      deletePairs(pairId){\r\n        let confirmation = confirm('This action is definitive. Do you want to continue ?')\r\n        if(!confirmation) {\r\n            return\r\n        }\r\n        axios.delete(`admin/currency-pairs/${pairId}`).then((res) => {\r\n            if(res.status === 200) {\r\n                this.hidePairsModal()\r\n                this.addNotif = 'SUCCESS! Currency Pair correctly deleted!'\r\n                this.showCurPairSuccess = true;\r\n                window.setTimeout(function() {\r\n                    this.showCurPairSuccess = false\r\n                }.bind(this), 5000)\r\n                this.$store.dispatch('getCurPairs')\r\n            }\r\n        })\r\n      },\r\n      // fait apparaitre la modale des Pair en Ajout\r\n      curPairsModalAddShow() {\r\n          this.addMode = true\r\n          this.showPairsModal = true\r\n      },\r\n      // fait appraitre la modale des Paires en Modification\r\n      curPairsModalEditShow(currencyPair) {\r\n          this.addMode = false\r\n          this.source_c = this.curList.filter(cur => cur.id === currencyPair.source_currency.id)[0].code\r\n          this.target_c = this.curList.filter(cur => cur.id === currencyPair.target_currency.id)[0].code\r\n          this.rateToEdit = currencyPair.rate\r\n          this.idToEdit = currencyPair.id\r\n          this.showPairsModal = true\r\n      },\r\n      // Fait disparaitre la modale des Paires\r\n      hidePairsModal() {\r\n          this.showPairsModal = false\r\n      },\r\n\r\n      // check the add pair form on the fly to decide \r\n      // wether to activate the submit button or not\r\n      checkAddPairsForm() {\r\n\r\n        if(\r\n            this.source_currency === '' || \r\n            this.target_currency === '' ||\r\n            this.source_currency === this.target_currency ||\r\n            !this.isNumeric(this.rate)\r\n        ) {\r\n            this.disabledBtn = true\r\n        } else {\r\n            this.disabledBtn = false\r\n        }\r\n        let t = this.curPairs.filter(pair => pair.source_currency.id === this.source_currency && pair.target_currency.id === this.target_currency)\r\n        if(t.length) {\r\n            this.error.push('That pair already exists!...')\r\n            if(this.disabledBtn === false) {\r\n                this.disabledBtn = true\r\n            }\r\n            this.oldRate = this.rate\r\n            this.rate = t[0].rate\r\n            this.needsCorrection = true\r\n            \r\n        }else {\r\n          this.error = []\r\n          if(this.needsCorrection) {\r\n              if(!this.oldRate) {\r\n                  this.disabledBtn = true\r\n              }\r\n              this.rate = this.oldRate\r\n              this.oldRate = false\r\n              this.needsCorrection = false\r\n          }\r\n          let t2 = this.curPairs.filter(pair => pair.target_currency.id === this.source_currency && pair.source_currency.id === this.target_currency)\r\n          console.log(t2)\r\n          if(t2.length) {\r\n              this.oldRate = this.rate\r\n              this.disabledBtn = false\r\n              this.rate = (1/t2[0].rate).toFixed(4)\r\n              this.needsCorrection = true\r\n          }\r\n        }\r\n      },\r\n      // remet à zéro le formulaire de la modale des Pairs\r\n      resetCurPairsForm() {\r\n          if(this.addMode) {\r\n              this.rate = ''\r\n              this.source_currency = ''\r\n              this.target_currency = ''\r\n          } else {\r\n              this.rateToEdit = ''\r\n          }\r\n      },\r\n      // fait disparaitre la notification de succes d'ajout ou modification \r\n      // des Paires\r\n      hideCurPairSuccess() {\r\n          this.showCurPairSuccess = false\r\n      },\r\n      // dicrimination du traitement à appliquer (ajout vs modif)\r\n      handleSubmitCurPair(mode) {\r\n          if(mode) {\r\n              this.handleSubmitAddCurrencyPairs()\r\n          } else {\r\n              this.handleSubmitEditCurrencyPairs()\r\n          }\r\n      },\r\n      // Gestionnaire de soumission du formulaire d'ajout de la \r\n      // modale des currency Pairs\r\n      async handleSubmitAddCurrencyPairs() {\r\n        this.validateAddPairsform()\r\n\r\n        // on effectue le call api vers le endpoint /sanctum/csrf-cookie \r\n        // pour récup le jeton csrf\r\n        try {\r\n          const csrf = await axios.get('/sanctum/csrf-cookie')\r\n          // console.log(csrf)\r\n          if(csrf.status !== 204){\r\n              throw new Error('Csrf protection disabled!')\r\n          }\r\n\r\n          // puis on effectue le call api vers le endpoint /register\r\n          const res = await axios.post('admin/currency-pairs', {\r\n              source_currency: this.source_currency,\r\n              target_currency: this.target_currency,\r\n              rate: this.rate,\r\n              hits: 0\r\n          });\r\n\r\n          if(res.status === 201) {\r\n            this.hidePairsModal()\r\n            this.addNotif = 'SUCCESS! Pair correctly added!'\r\n            this.showCurPairSuccess = true;\r\n            window.setTimeout(function() {\r\n                this.showCurPairSuccess = false\r\n            }.bind(this), 5000)\r\n            this.$store.dispatch('getCurPairs')\r\n          }\r\n        }catch (e) {\r\n          // echec: il y a erreur et on l'affiche\r\n          this.error.push('Error Occured!');\r\n        }\r\n      },\r\n      // Validation du formulaire d'ajout des Paires\r\n      validateAddPairsform() {\r\n          this.error = []\r\n          if(this.source_currency === '' || \r\n              this.target_currency === '') {\r\n              this.error.push('All fields are required')\r\n          }\r\n\r\n          if(this.source_currency === this.target_currency) {\r\n              this.error.push('source currency must be different than targer currency')\r\n          }\r\n\r\n          if(!this.isNumeric(this.rate)) {\r\n              this.error.push('The rate must be of NUMERIC type')\r\n          }\r\n\r\n          let t = this.curPairs.filter(pair => pair.source_currency.id === this.source_currency && pair.target_currency.id === this.target_currency)\r\n          if(t.length) {\r\n              this.error.push('That pair already exists!...')\r\n          }\r\n      },\r\n      async handleSubmitEditCurrencyPairs() {\r\n        if(!this.validateEditPairsForm) {\r\n            return\r\n        }\r\n        // on effectue le call api vers le endpoint /sanctum/csrf-cookie pour récup \r\n        // le jeton csrf\r\n        try {\r\n            const csrf = await axios.get('/sanctum/csrf-cookie')\r\n            // console.log(csrf)\r\n            if(csrf.status !== 204){\r\n                throw new Error('Csrf protection disabled!')\r\n            }\r\n\r\n            // puis on effectue le call api vers le endpoint /register\r\n            const res = await axios.patch(`admin/currency-pairs/${this.idToEdit}`, {\r\n                rate: this.rateToEdit,\r\n            });\r\n\r\n            if(res.status === 200) {\r\n                this.hidePairsModal()\r\n                this.addNotif = 'SUCCESS! Pair successfully updated!'\r\n                this.showCurPairSuccess = true;\r\n                window.setTimeout(function() {\r\n                    this.showCurPairSuccess = false\r\n                }.bind(this), 5000)\r\n                this.$store.dispatch('getCurPairs')\r\n            }\r\n        }catch (e) {\r\n            // echec: il y a erreur et on l'affiche\r\n            this.error.push('Error Occured!');\r\n        }\r\n      },\r\n      // Validation du formulaire de modification des paires\r\n      validateEditPairsForm() {\r\n        this.error = []\r\n        if(this.ratetoEdit === '') {\r\n            this.error.push('Please enter an exchange rate')\r\n        }\r\n        if(!this.isNumeric(this.rateToEdit)) {\r\n            this.error.push('The rate must be of NUMERIC type')\r\n        }\r\n        return !this.error.length\r\n      },\r\n      // méthode permettant de vérifier qu'une entrée est un nombre\r\n      isNumeric(n) {\r\n          return !isNaN(parseFloat(n)) && isFinite(n);\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n\r\n\r\n<style>\r\n\r\n.top-container {\r\n    min-height: 45vh;\r\n    width: 100%;\r\n}\r\n\r\n.cur-list {\r\n    width: 100%;\r\n    max-width: 100%;\r\n    max-height: 400px;\r\n    overflow-x: hidden;\r\n    overflow-y: auto;\r\n}\r\n\r\n.w25 {\r\n    padding:15px;\r\n    width: 100%;\r\n    max-width: 100%;\r\n    border-radius: 4px;\r\n}\r\n\r\n.wide {\r\n    width: 100%;\r\n}\r\n\r\n#currencyModal {\r\n    display: unset;\r\n}\r\n\r\n#currencyPairsModal {\r\n    display: unset;\r\n}\r\n\r\n.calque {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width:100%;\r\n    height:100%;\r\n    z-index:5;\r\n    background: #00000077;\r\n}\r\n\r\n.big-font {\r\n    font-size: 32px;\r\n    font-weight: 700;\r\n}\r\n\r\n.rate-def {\r\n    font-size: 40px;\r\n    max-width: 45%;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}