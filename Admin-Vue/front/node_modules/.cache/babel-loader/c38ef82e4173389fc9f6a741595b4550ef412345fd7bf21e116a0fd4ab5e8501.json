{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { mapState } from 'vuex';\nimport ErrorAlert from './login/ErrorAlert.vue';\nexport default {\n  name: 'AdminConverter',\n  components: {\n    ErrorAlert\n  },\n  data() {\n    return {\n      error: [],\n      fromCurrency: null,\n      amount: null,\n      toCurrency: null,\n      conversion_result: null,\n      converterBtnDisable: false\n    };\n  },\n  created() {\n    if (!this.curList) {\n      this.$store.dispatch('getCurList');\n    }\n    if (!this.curPairs) {\n      this.$store.dispatch('getCurPairs');\n    }\n  },\n  computed: {\n    ...mapState(['curList', 'curPairs'])\n  },\n  methods: {\n    // méthode permettant de vérifier qu'une entrée est un nombre\n    isNumeric(n) {\n      return !isNaN(parseFloat(n)) && isFinite(n);\n    },\n    checkConverter() {\n      if (this.fromCurrency === this.toCurrency) {\n        this.converterBtnDisable = true;\n      } else {\n        this.converterBtnDisable = false;\n      }\n    },\n    async convert() {\n      this.error = [];\n      if (this.fromCurrency === this.toCurrency) {\n        this.conversion_result = 1.00;\n        return;\n      }\n      if (this.amount < 0) {\n        this.amount = -this.amount;\n      }\n      if (!this.isNumeric(this.amount)) {\n        return;\n      }\n\n      // on effectue le call api vers le endpoint api/v1/currency-pairs/convert/{source_currency_code}/{target_currency_code}/{amount} \n      try {\n        // puis on effectue le call api vers le endpoint /register\n        const res = await axios.get(`api/v1/currency-pairs/convert/${this.fromCurrency}/${this.toCurrency}/${this.amount}`, {});\n        // console.log(res)\n        if (res.status === 200) {\n          this.conversion_result = `${this.toCurrency} ${res.data.converted_amount.toFixed(4)}`;\n        }\n      } catch (e) {\n        // echec: il y a erreur et on l'affiche\n        this.error.push('Error Occured!');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","mapState","ErrorAlert","name","components","data","error","fromCurrency","amount","toCurrency","conversion_result","converterBtnDisable","created","curList","$store","dispatch","curPairs","computed","methods","isNumeric","n","isNaN","parseFloat","isFinite","checkConverter","convert","res","get","status","converted_amount","toFixed","e","push"],"sources":["/Users/hj/Desktop/cours/6_Projet3_Money-Value/Projet3_Money-Value/Admin-Vue/front/src/components/AdminConverter.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h4 class=\"text-center\">Converter</h4>\r\n    <ErrorAlert v-if=\"error.length\" :error=\"error\" />\r\n    <form @submit.prevent=\"convert\">\r\n        \r\n        <div>\r\n            <label>From currency</label>\r\n            <select class=\"form-select shadow border dropdown-toggle d-block text-start mb-3\" v-model=\"fromCurrency\" name=\"from_currency\" id=\"from_currency\" @change=\"checkConverter\">\r\n                <option value=\"\" :selected=\"true\">--Choose--</option>\r\n                <option v-for=\"fc of curList\" :key=\"fc.id\" :value=\"fc.code\"><strong>{{ fc.code }}</strong>-<em>{{ fc.full_name }}</em></option>\r\n            </select>\r\n        </div>\r\n\r\n        <div class=\"input-group mb-3\">\r\n            <input type=\"text\" class=\"form-control shadow border\" v-model.number=\"amount\" placeholder=\"Amount\" aria-label=\"Amount box\" aria-describedby=\"amount box\">\r\n        </div>\r\n\r\n        <div class=\"mt-2\">\r\n            <label>To currency</label>\r\n            <select class=\"form-select shadow border dropdown-toggle d-block text-start\" v-model=\"toCurrency\"  name=\"to_currency\" id=\"to_currency\" @change=\"checkConverter\">\r\n                <option value=\"\" :selected=\"true\">--Choose--</option>\r\n                <option v-for=\"tc of curList\" :key=\"tc.id\" :value=\"tc.code\"><strong>{{ tc.code }}</strong>-<em>{{ tc.full_name }}</em></option>\r\n            </select>\r\n        </div>\r\n\r\n        <label>=</label>\r\n        <div class=\"input-group mb-3\">\r\n            <input type=\"text\" class=\"form-control shadow border conversion-result\" v-model.number=\"conversion_result\" placeholder=\"Résults....\" aria-label=\"Results box\" aria-describedby=\"résults box\">\r\n        </div>\r\n\r\n        <button class=\"btn btn-primary btn-block mt-3\" type=\"submit\" :disabled=\"converterBtnDisable\">convert</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n  import axios from 'axios';\r\n  import { mapState } from 'vuex';\r\n  import ErrorAlert from './login/ErrorAlert.vue';\r\n\r\n  export default {\r\n\r\n      name: 'AdminConverter',\r\n\r\n      components: {\r\n          ErrorAlert\r\n      },\r\n\r\n      data() {\r\n        return({\r\n          error: [],\r\n          fromCurrency:null,\r\n          amount: null,\r\n          toCurrency: null,\r\n          conversion_result: null,\r\n          converterBtnDisable: false,\r\n        })\r\n      },\r\n\r\n      created() {\r\n        if(!this.curList) {\r\n            this.$store.dispatch('getCurList')\r\n        }\r\n        if(!this.curPairs) {\r\n            this.$store.dispatch('getCurPairs')\r\n        }\r\n      },\r\n      computed: {\r\n          ...mapState(['curList', 'curPairs']),\r\n          \r\n      },\r\n      methods: {\r\n        // méthode permettant de vérifier qu'une entrée est un nombre\r\n        isNumeric(n) {\r\n            return !isNaN(parseFloat(n)) && isFinite(n);\r\n        },\r\n\r\n        checkConverter() {\r\n            if(this.fromCurrency === this.toCurrency) {\r\n                this.converterBtnDisable = true\r\n            } else {\r\n                this.converterBtnDisable = false\r\n            }\r\n        },\r\n        async convert() {\r\n            this.error = []\r\n\r\n            if(this.fromCurrency === this.toCurrency) {\r\n                this.conversion_result = 1.00\r\n                return\r\n            }\r\n            if(this.amount < 0) {\r\n                this.amount = -this.amount\r\n            }\r\n            if(!this.isNumeric(this.amount)) {\r\n                return\r\n            }\r\n\r\n            // on effectue le call api vers le endpoint api/v1/currency-pairs/convert/{source_currency_code}/{target_currency_code}/{amount} \r\n            try {\r\n\r\n                // puis on effectue le call api vers le endpoint /register\r\n                const res = await axios.get(`api/v1/currency-pairs/convert/${this.fromCurrency}/${this.toCurrency}/${this.amount}`, {});\r\n                // console.log(res)\r\n                if(res.status === 200) {\r\n                    this.conversion_result = `${this.toCurrency} ${res.data.converted_amount.toFixed(4)}`\r\n                }\r\n            }catch (e) {\r\n                // echec: il y a erreur et on l'affiche\r\n                this.error.push('Error Occured!');\r\n            }\r\n\r\n        }\r\n      }\r\n  }\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.conversion-result {\r\n    font-size: 32px;\r\n    font-weight: 700;\r\n}\r\n</style>"],"mappings":";AAsCE,OAAOA,KAAI,MAAO,OAAO;AACzB,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAOC,UAAS,MAAO,wBAAwB;AAE/C,eAAe;EAEXC,IAAI,EAAE,gBAAgB;EAEtBC,UAAU,EAAE;IACRF;EACJ,CAAC;EAEDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,EAAE;MACTC,YAAY,EAAC,IAAI;MACjBC,MAAM,EAAE,IAAI;MACZC,UAAU,EAAE,IAAI;MAChBC,iBAAiB,EAAE,IAAI;MACvBC,mBAAmB,EAAE;IACvB,CAAC;EACH,CAAC;EAEDC,OAAOA,CAAA,EAAG;IACR,IAAG,CAAC,IAAI,CAACC,OAAO,EAAE;MACd,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,YAAY;IACrC;IACA,IAAG,CAAC,IAAI,CAACC,QAAQ,EAAE;MACf,IAAI,CAACF,MAAM,CAACC,QAAQ,CAAC,aAAa;IACtC;EACF,CAAC;EACDE,QAAQ,EAAE;IACN,GAAGhB,QAAQ,CAAC,CAAC,SAAS,EAAE,UAAU,CAAC;EAEvC,CAAC;EACDiB,OAAO,EAAE;IACP;IACAC,SAASA,CAACC,CAAC,EAAE;MACT,OAAO,CAACC,KAAK,CAACC,UAAU,CAACF,CAAC,CAAC,KAAKG,QAAQ,CAACH,CAAC,CAAC;IAC/C,CAAC;IAEDI,cAAcA,CAAA,EAAG;MACb,IAAG,IAAI,CAACjB,YAAW,KAAM,IAAI,CAACE,UAAU,EAAE;QACtC,IAAI,CAACE,mBAAkB,GAAI,IAAG;MAClC,OAAO;QACH,IAAI,CAACA,mBAAkB,GAAI,KAAI;MACnC;IACJ,CAAC;IACD,MAAMc,OAAOA,CAAA,EAAG;MACZ,IAAI,CAACnB,KAAI,GAAI,EAAC;MAEd,IAAG,IAAI,CAACC,YAAW,KAAM,IAAI,CAACE,UAAU,EAAE;QACtC,IAAI,CAACC,iBAAgB,GAAI,IAAG;QAC5B;MACJ;MACA,IAAG,IAAI,CAACF,MAAK,GAAI,CAAC,EAAE;QAChB,IAAI,CAACA,MAAK,GAAI,CAAC,IAAI,CAACA,MAAK;MAC7B;MACA,IAAG,CAAC,IAAI,CAACW,SAAS,CAAC,IAAI,CAACX,MAAM,CAAC,EAAE;QAC7B;MACJ;;MAEA;MACA,IAAI;QAEA;QACA,MAAMkB,GAAE,GAAI,MAAM1B,KAAK,CAAC2B,GAAG,CAAE,iCAAgC,IAAI,CAACpB,YAAa,IAAG,IAAI,CAACE,UAAW,IAAG,IAAI,CAACD,MAAO,EAAC,EAAE,CAAC,CAAC,CAAC;QACvH;QACA,IAAGkB,GAAG,CAACE,MAAK,KAAM,GAAG,EAAE;UACnB,IAAI,CAAClB,iBAAgB,GAAK,GAAE,IAAI,CAACD,UAAU,IAAIiB,GAAG,CAACrB,IAAI,CAACwB,gBAAgB,CAACC,OAAO,CAAC,CAAC,CAAE;QACxF;MACJ,CAAC,QAAOC,CAAC,EAAE;QACP;QACA,IAAI,CAACzB,KAAK,CAAC0B,IAAI,CAAC,gBAAgB,CAAC;MACrC;IAEJ;EACF;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}